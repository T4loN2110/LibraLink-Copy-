<!DOCTYPE html>
<html lang="en">
    <%include ./include/head %>
    <body>
        <%include ./include/nav %>
        <div class="container">
        <div class="row">
            <% include ./include/sidemenu_librarian %>
            <div class="col-10 col-lg-9" >
                <div class="row" style="padding-top: 5%;">
                <div class="col-10">
                <div class="title text personaltitle margin-left:5%">Favorites</div>
                </div>

                </div>
                
                <p>&nbsp;</p>                    
                  
                <table class="table table-responsive align-middle table-bordered border border-black" style=" padding-left: 15px;" id="bruh">
                  <thead class="table-primary  border border-black" style="text-align:center;">
                    <tr>
                        <th>No.</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Year</th>
                        <th>Action</th>
                    </tr>
                  </thead>
                    <% if(favourite.length){
                        for(var i = 0; i< favourite.length; i++) {%> 

                    <tr>
                        <th><%=i+1%></th>
                        <th><%=favourite[i].ten%></th>
                        <th><%=favourite[i].tac_gia%></th>
                        <th><%=favourite[i].nam_xb%></th>
                        <th> <div style="display: flex; align-items: center; justify-content: center;">
                            <a href="/rating/remove_favourite?id=<%=favourite[i]._id%>" class="action_button" style="margin-left: 5px;"id="deleteFavorite">Delete</a>
                        </div></th>
                    </tr>       
                    <% }} %>
                </table>
                <p>&nbsp;</p>

                <div class="row">
                <% if(pages > 0) { %>
                    <nav class="mx-auto">
                      <ul class="pagination" style="margin-top: 2rem;">
                      
                        <% if(current == 1) { %> 

                            <li class="page-item disabled">
                              <a class="page-link" href="1/">First</a>
                            </li>
                        <% } else { %>

                            <li class="page-item">
                              <a class="page-link" href="1/">First</a>
                            </li>
                        <% } %>
                        
                        <% var i = (Number(current) > 3 ? Number(current) - 2 : 1) %> 

                        <% if(i !== 1) { %>
                            <li class="page-item disabled">
                              <a class="page-link" href="#">...</a>
                            </li>
                        <% } %>
                        <% for(; i <= (Number(current) + 2) && i <= pages; i++) { %>
                        
                          <% if(i == current) { %>
                            <li class="page-item active">
                              <% var link=i%>
                              <a class="page-link" href=<%=link%> >
                                <%= i %>
                              </a>
                            </li>
                        <% } else { %>
                            <li class="page-item">
                              <% var link=i%>
                              <a class="page-link" href=<%=link%> >
                                <%= i %>
                              </a>
                            </li>
                        <% } %>
                        <% if (i == Number(current) + 2 && i < pages) { %>
                            <li class="page-item disabled">
                              <a class="page-link" href="#">...</a>
                            </li>
                        <% } %>
                        <% } %>
                        
                        <!-- LAST ITEM -->
                        <% if(current == pages) { %> 

                            <li class="page-item disabled">
                              <a class="page-link" href="#">
                                Last
                              </a>
                            </li>
                        <% } else { %>
                        
                            <li class="page-item">
                              <% var link=i%>
                              <a class="page-link" href=<%=link%> >
                                Last
                              </a>
                            </li>
                        <% } %>
                      </ul>
                    </nav>
                    <% } %>
                </div>
            </div>    
        </div>
    </div>


        <%include ./include/scripts %>
        <%include ./include/footer %>
    </body>
    
</html>

